(provide `kotlin-client)
(require `popup)

(setq czq-kotlin-server-port "2000")
(setq czq-kotlin-server-ip "192.168.1.103")

(defun start-kotlin-server-connection (port)
  (interactive "sserver port:")
  (setq czq-kotlin-stream (open-network-stream "kotlin-connection" nil czq-kotlin-server-ip port))
  (set-process-filter czq-kotlin-stream 'keep-kotlin-output)
  (message (format "start connection to %s:%s" czq-kotlin-server-ip port)))



(defun keep-kotlin-output (process kotlin-output)
  (setq kotlin-kept (cons kotlin-output kotlin-kept)))
(defun empty-kotlin-output ()  (setq kotlin-kept nil))
(defun get-kotlin-output () (string-join (reverse kotlin-kept)))
